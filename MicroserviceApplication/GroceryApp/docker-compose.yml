#docker compose file for an grocery app with frontend, backend and mongoDB


services :
    nginx:
      image: nginx:latest
      container_name: nginx
      ports:
        - "80:80"
      volumes:
        - ./nginx/default.conf:/etc/nginx/conf.d/default.conf
      depends_on:
        - grocery-frontend
        - grocery-backend

    grocery-frontend:
      build:
        context: ./GroceryAppFE/
        dockerfile: Dockerfile
      container_name: grocery-frontend
      ports:
        - "3000:3000"
      depends_on:
        - grocery-backend

    grocery-backend:
      build:
        context: ./GroceryAppBE-/
        dockerfile: Dockerfile
      container_name: grocery-backend
      ports:
        - "5000:5000"
      env_file:
        - ./GroceryAppBE-/.env
      depends_on:
        - mongo


    mongo:
      image: mongo:latest
      container_name: mongo
      ports:
        - "27017:27017"
      volumes:
        - mongo-data:/data/db

volumes:
  mongo-data:
    driver: local